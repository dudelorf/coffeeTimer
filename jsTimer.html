<!DOCTYPE html>
<head>
	<title>Countdown Timer</title>
	<link rel="stylesheet" type="text/css" href="stylesheet.css" />
</head>
<body onload="window_onload()">
	<div id="timer">
		<p id="digits"></p>	
		<input type="button" value="Start" onclick="startTimer()"/>
		<input type="button" value="Stop" onclick="stopTimer()"; /><br />
		<div id="volumeSelector">
			<div id="lessVolume"><img src="leftArrow.png"/></div>
			<p id="brewVolume">0 oz</p>
			<div id="moreVolume"><img src="rightArrow.png"/></div>
		</div>
		
	</div>
	<p id="messenger">Click start to begin</p>
<script type="text/javascript">
	
	//variable to hold time
	var time = 0;
	//tracks activity of timer
	var timerActive = false;
	var timeIntervals = [3, 3, 3];
	var messages = ["bloom", "pour", "draw down"];
	var phase = 0;

	function displayTime()
	//formats and prints remaining time
	{
		var outputStr = "";
		
		var mins = Math.floor(time / 60);
		if (mins < 10)
		{
			mins = "0" + mins;
		}
		var seconds = time % 60;
		if (seconds < 10)
		{
			seconds = "0" + seconds;
		}
		
		outputStr += mins + ":" + seconds;
		
		document.getElementById("digits").innerHTML = outputStr;
	}
	
	function adjustTime(valu, oper)
	{
		if (timerActive) return;
		if (valu == "m")
		{
			if (oper == '+') time+=60;
			else if (time >= 60) time-=60;
		}
		else
		{
			if (oper == "+") time++;
			else if (time > 0) time --;
		}
		displayTime();
	}
	
	function startTimer()
	//begins the timer countdown
	{
		phase = 0;
		timerActive = true;
		time = timeIntervals[phase];
		document.getElementById("messenger").innerHTML = messages[phase];
		displayTime();
		setTimeout(decreaseTime, 1000);
	}
	
	function stopTimer()
	{
		time++;
		timerActive = false;
		phase = 0;
	}
	
	function newInterval()
	{
		time = timeIntervals[phase];
		displayTime();
		document.getElementById("messenger").innerHTML = messages[phase];
		setTimeout(decreaseTime, 1000);
	}
	
	function decreaseTime()
	//decrements time and alerts if timer is finished
	{
		time--;
		displayTime();
		if(time == 0)
		{
			phase++;
			if (phase == timeIntervals.length)
			{
				timerActive = false;
				document.getElementById("messenger").innerHTML = "Timer is done";
			}
			else
			{
				setTimeout(newInterval, 1000);
			}
		}
		else if (timerActive)
		{
			setTimeout(decreaseTime, 1000);
		}
	
	}
	function window_onload()
	//initialization commands
	{
		displayTime();
	}
</script>
</body>
</html>